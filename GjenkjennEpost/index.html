<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recognize Email</title>
</head>

<body>
<!-- Oppgave: Gjenkjenn epostadresse
    Du skal lage en enkel funksjon som tar en tekst som parameter og
    returnerer true eller false ut fra om teksten er en epostadresse eller ikke

    1. I fÃ¸rste omgang skal funksjonen si at det er en epostadresse kun hvis teksten inneholder @.
    2. I tillegg: teksten skal ikke inneholde mellomrom.
    3. I tillegg: teksten skal ha et punktum et sted etter @.
-->

    <div id="app"></div>


    <script>
        const app = document.getElementById("app");
        const currentpage = ["login", "profile"];
        let index = 0;

        let atSymbol = "";
        let emailText = "";





        function updateView() {
            if (currentpage[index] == "login") {
                app.innerHTML = /*HTML*/ `
                <input onchange="saveEmail(this.value)" type="text" placeholder="email">
                <button onclick="checkIfEmail()">Login</button>
                <p>${atSymbol}</p>
            `;
            } else if (currentpage[index] == "profile") {
                app.innerHTML = /*HTML*/ `
                <p>You are logged in</p>
                <button onclick="changePage(0)">Log out</button>
            `;
            }
        }
        updateView();





        function saveEmail(saveEmailText) {
            emailText = saveEmailText;
        }

  

        function checkIfEmail() {
            if (!emailText.includes("@")) {
                atSymbol = "Emails require an @ symbol.";
                console.log(emailText);
                updateView();
            }
            else {
                let atIndex = emailText.indexOf("@");
                let dotIndex = emailText.indexOf(".", atIndex);

                if (dotIndex === -1) {
                    atSymbol = "Emails require a . symbol after the @";
                } else {
                    atSymbol = "";
                    changePage(1);
                }
                updateView();
            }
        }



        function changePage(page) {
            index = page;
            updateView();
        }
    </script>
</body>

</html>